import discord
from discord.ext import commands

intents = discord.Intents.default()
intents.message_content = True
intents.voice_states = True
intents.members = True

bot = commands.Bot(command_prefix="!", intents=intents)

# ã‚ãªãŸã®ç’°å¢ƒã®ãƒãƒ£ãƒ³ãƒãƒ«ID
TARGET_VC_ID = 1434447254735032353                   # VC
SOURCE_TEXT_CHANNEL_ID = 1434447254735032352         # ç›£è¦–ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ
TARGET_TEXT_CHANNEL_ID = 1442449125550592081         # è»¢é€å…ˆãƒ†ã‚­ã‚¹ãƒˆ

def is_in_target_vc(member: discord.Member):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŒ‡å®šVCã«ã„ã‚‹ã‹ç¢ºèª"""
    return (
        member.voice 
        and member.voice.channel 
        and member.voice.channel.id == TARGET_VC_ID
    )

@bot.event
async def on_message(message: discord.Message):
    # Bot è‡ªèº«ã®ç™ºè¨€ã¯ç„¡è¦–
    if message.author.bot:
        return

    # ç™ºè¨€ãƒãƒ£ãƒ³ãƒãƒ«ãŒç›£è¦–å¯¾è±¡ã§ãªã„å ´åˆã¯ç„¡è¦–
    if message.channel.id != SOURCE_TEXT_CHANNEL_ID:
        return

    # VC ã«å‚åŠ ã—ã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç„¡è¦–
    if not is_in_target_vc(message.author):
        return

    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è»¢é€
    target_channel = bot.get_channel(TARGET_TEXT_CHANNEL_ID)
    if target_channel:
        await target_channel.send(
            f"ğŸ“¨ **{message.author.display_name}**: {message.content}"
        )

# Bot ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥ã‚Œã¦ãã ã•ã„
bot.run("1442439044863758337")


python bot.py
